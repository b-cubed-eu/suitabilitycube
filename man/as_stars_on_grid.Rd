% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/as_stars_on_grid.R
\name{as_stars_on_grid}
\alias{as_stars_on_grid}
\title{Aggregate a single-layer raster/stars to a polygon grid and return a stars object}
\usage{
as_stars_on_grid(sr, grid, fun = mean, name = NULL, na.rm = TRUE)
}
\arguments{
\item{sr}{A terra::SpatRaster or a stars object (single-layer preferred).}

\item{grid}{An sf object of polygon grid cells (from make_country_grid()).}

\item{fun}{Aggregation function (e.g., mean). Ignored for AOA where mode is used.}

\item{name}{Optional name for the resulting stars attribute (e.g., "AOA", "DI").}

\item{na.rm}{Logical; remove NA values in aggregation.}
}
\value{
A stars object aggregated to the grid, with dimension "cell".
}
\description{
Converts input to stars (if needed), aligns CRS (warp), aggregates values over
polygon geometries, and sets the geometry dimension name to "cell".
}
\details{
Special case: if `name` contains "AOA" (case-insensitive), aggregation uses
a mode function (useful for binary/categorical AOA masks).
}
